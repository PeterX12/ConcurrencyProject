<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Concurrency Project: main.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Concurrency Project
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">This project let&#39;s the user input a number for which up to all the Twin Prime Pair numbers are found and printed and also all the Prime Numbers up to that number are calulated. The user inputs that number and also inputs how many threads they want to run the program with.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">main.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="main_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  This work is licensed under the Creative Commons Attribution-NonCommercial-   NoDerivatives 4.0 International License. To view a copy of this license, vi   si t http://creativecommons.org/licenses/by-nc-nd/4.0/.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;bits/stdc++.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="utility_8h.html">utility.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">   32</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>(){</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// Variable Decelration and Initialisation</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    uint64_t n = 0;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    uint64_t numOfThreads = 0;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    uint64_t numberOfPrimes = 0;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordtype">double</span> time = 0;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordtype">double</span> timeTwo = 0;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordtype">double</span> hr = 0;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">double</span> min = 0;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">double</span> sec = 0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    uint64_t divider = 0;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    vector&lt;future&lt;uint64_t&gt;&gt; threads;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// Enter the number and also the amount of threads you would like the program to run with.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;Enter Number N: &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    cin &gt;&gt; n;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;How many threads would you like to use? (Enter 0 for Sequential) &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    cin &gt;&gt; numOfThreads;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">//If 0 is entered for the number of threads this section containing sequential code is executed.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (numOfThreads == 0){</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keyword">auto</span> start = chrono::steady_clock::now(); <span class="keyword">auto</span> startTwo = chrono::steady_clock::now(); <span class="comment">//Time count starts to measure execution time of Sequential code.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="utility_8h.html#ad97f44f50f9c665d1ab921528ce5cec7">findPrimePairs</a>(n);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="utility_8h.html#a21ebe3b06f9a5ee3e870a30341f8c236">countPrimesSequential</a>(n);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keyword">auto</span> end = chrono::steady_clock::now(); <span class="keyword">auto</span> endTwo = chrono::steady_clock::now(); <span class="comment">//Time count ends to measure execution time of Sequential code.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        time = uint64_t (chrono::duration_cast&lt;chrono::milliseconds&gt;(end - start).count()); timeTwo = uint64_t (chrono::duration_cast&lt;chrono::nanoseconds&gt;(endTwo - start).count()); <span class="comment">//Time is calulated in milliseconds and naoseconds for Sequential Code.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">//Otherwise the parallel code is executed</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">else</span> { </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keyword">auto</span> start = chrono::steady_clock::now(); <span class="keyword">auto</span> startTwo = chrono::steady_clock::now(); <span class="comment">//Time count starts to measure execution time of Parallel code.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        divider = n / numOfThreads;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; numOfThreads; i++){</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            threads.push_back(async(<a class="code" href="utility_8h.html#ab1e9ec277e703a7f84a81ba487edae3f">countPrimes</a>, i * divider, (i + 1) * divider));</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }   </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;t : threads){ </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            numberOfPrimes += t.get();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="utility_8h.html#ad97f44f50f9c665d1ab921528ce5cec7">findPrimePairs</a>(n);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;The Number of Prime Numbers up to: &quot;</span> &lt;&lt; n &lt;&lt; <span class="stringliteral">&quot; is: &quot;</span> &lt;&lt; numberOfPrimes &lt;&lt; endl;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keyword">auto</span> end = chrono:: steady_clock::now(); <span class="keyword">auto</span> endTwo = chrono::steady_clock::now(); <span class="comment">//Time count ends to measure execution time of Parallel code.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        time = uint64_t (chrono::duration_cast&lt;chrono::milliseconds&gt;(end - start).count()); timeTwo = uint64_t (chrono::duration_cast&lt;chrono::nanoseconds&gt;(endTwo - start).count()); <span class="comment">//Time is calulated in milliseconds and naoseconds for Paralled code.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">//Calculations to dispaly time in Hours, Minutes and Seconds</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    hr = (time / (60 * 60 * 1000));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    min = time / 60000;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    sec = time / 1000;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;Execution time in: Hrs: &quot;</span>  &lt;&lt; hr &lt;&lt; endl; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;Execution time in: Mins: &quot;</span>&lt;&lt; min &lt;&lt; endl;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;Execution time in: Secs: &quot;</span>&lt;&lt; sec &lt;&lt; endl;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;Execution time in: Miliseconds: &quot;</span> &lt;&lt; time &lt;&lt; endl;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;Execution time in: Nanoseconds: &quot;</span> &lt;&lt; timeTwo &lt;&lt; endl;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="autility_8h_html_a21ebe3b06f9a5ee3e870a30341f8c236"><div class="ttname"><a href="utility_8h.html#a21ebe3b06f9a5ee3e870a30341f8c236">countPrimesSequential</a></div><div class="ttdeci">void countPrimesSequential(uint64_t n)</div><div class="ttdef"><b>Definition:</b> <a href="utility_8h_source.html#l00181">utility.h:181</a></div></div>
<div class="ttc" id="autility_8h_html"><div class="ttname"><a href="utility_8h.html">utility.h</a></div></div>
<div class="ttc" id="amain_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00032">main.cpp:32</a></div></div>
<div class="ttc" id="autility_8h_html_ab1e9ec277e703a7f84a81ba487edae3f"><div class="ttname"><a href="utility_8h.html#ab1e9ec277e703a7f84a81ba487edae3f">countPrimes</a></div><div class="ttdeci">uint64_t countPrimes(uint64_t start, uint64_t end)</div><div class="ttdef"><b>Definition:</b> <a href="utility_8h_source.html#l00122">utility.h:122</a></div></div>
<div class="ttc" id="autility_8h_html_ad97f44f50f9c665d1ab921528ce5cec7"><div class="ttname"><a href="utility_8h.html#ad97f44f50f9c665d1ab921528ce5cec7">findPrimePairs</a></div><div class="ttdeci">void findPrimePairs(uint64_t n)</div><div class="ttdef"><b>Definition:</b> <a href="utility_8h_source.html#l00032">utility.h:32</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
